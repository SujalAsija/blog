{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Downloads\\\\TravellerTales\\\\TravellerTales\\\\TravellerTales\\\\frontend\\\\src\\\\components\\\\ProfileDetails.jsx\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProfileDetails = _ref => {\n  _s();\n  let {\n    setName\n  } = _ref;\n  const navigate = useNavigate();\n  const URL = \"http://localhost:5000/users\";\n  const [user, setUser] = useState({});\n  const [changePass, setChangePass] = useState(false);\n  const [oldPass, setOldPass] = useState(\"\");\n  const [newPass, setNewPass] = useState(\"\");\n  const [confirmPass, setConfirmPass] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const changeUserPass = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(`${URL}/changePass`, {\n        status: \"changePass\",\n        id: localStorage.getItem(\"userId\"),\n        oldPass,\n        newPass,\n        confirmPass\n      });\n      if (response.status === 200) {\n        navigate(\"/\");\n      }\n    } catch (error) {\n      if (error.response.status === 401) {\n        navigate(\"/login\");\n      } else if (error.response.status === 400) {\n        setError(error.response.data.error);\n      }\n    }\n  };\n  const getUserDetails = async () => {\n    try {\n      const response = await axios.post(`${URL}/getUser`, {\n        id: localStorage.getItem(\"userId\")\n      });\n      if (response.status === 200) {\n        setUser(response.data.user);\n        setName(response.data.user.name);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  useEffect(() => {\n    getUserDetails();\n  }, []);\n  return user && !changePass ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-evenly h-full items-start flex-col gap-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-bold tracking-wider\",\n      children: [\"Name - \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-normal\",\n        children: user.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 54\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-bold tracking-wider\",\n      children: [\"Username - \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-normal\",\n        children: user.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 58\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-bold tracking-wider\",\n      children: [\"Age - \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-normal\",\n        children: user.age\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 53\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-bold tracking-wider\",\n      children: [\"Blogs Posted - \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-normal\",\n        children: user.totalBlogs\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 62\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setChangePass(true),\n        className: \"text-[blue] text-sm tracking-wider hover:underline\",\n        children: \"Change Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"text-[blue] text-sm tracking-wider hover:underline\",\n        children: \"Delete my account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 27\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setChangePass(false),\n      className: \"text-sm tracking-wider flex gap-[2px] text-[blue] items-center\",\n      children: [/*#__PURE__*/_jsxDEV(ArrowBackIcon, {\n        style: {\n          fontSize: 14\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 129\n      }, this), \"Back\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: changeUserPass,\n      className: \"flex flex-col justify-evenly h-full items-center gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"font-bold tracking-wider\",\n        children: \"Change Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: oldPass,\n        onChange: e => setOldPass(e.target.value),\n        type: \"password\",\n        placeholder: \"Old Password\",\n        className: \"tracking-wider text-sm border-2 p-1 rounded-md focus:outline-none\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: newPass,\n        onChange: e => setNewPass(e.target.value),\n        type: \"password\",\n        placeholder: \"New Password\",\n        className: \"tracking-wider text-sm border-2 p-1 rounded-md focus:outline-none\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: confirmPass,\n        onChange: e => setConfirmPass(e.target.value),\n        type: \"password\",\n        placeholder: \"Confirm Password\",\n        className: \"tracking-wider text-sm border-2 p-1 rounded-md focus:outline-none\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-[red] tracking-wider\",\n        children: [error.length > 1 && \"*\", \" \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bg-[red] text-white px-2 py-1 rounded-sm tracking-wider text-sm\",\n        children: \"Confirm changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 7\n  }, this);\n};\n_s(ProfileDetails, \"Mv6a+cYLeEc7fxs8TdL8+OQJ2sU=\", false, function () {\n  return [useNavigate];\n});\n_c = ProfileDetails;\nexport default ProfileDetails;\nvar _c;\n$RefreshReg$(_c, \"ProfileDetails\");","map":{"version":3,"names":["axios","useEffect","useState","useNavigate","ArrowBackIcon","ProfileDetails","setName","navigate","URL","user","setUser","changePass","setChangePass","oldPass","setOldPass","newPass","setNewPass","confirmPass","setConfirmPass","error","setError","changeUserPass","e","preventDefault","response","post","status","id","localStorage","getItem","data","getUserDetails","name","console","log","username","age","totalBlogs","fontSize","target","value","length"],"sources":["C:/Users/HP/Downloads/TravellerTales/TravellerTales/TravellerTales/frontend/src/components/ProfileDetails.jsx"],"sourcesContent":["import axios from \"axios\"\nimport { useEffect, useState } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\n\nconst ProfileDetails = ({setName}) => {\n\n  const navigate = useNavigate();\n  const URL = \"http://localhost:5000/users\"\n  const [user, setUser] = useState({});\n  const [changePass, setChangePass] = useState(false);\n  const [oldPass, setOldPass] = useState(\"\");\n  const [newPass, setNewPass] = useState(\"\");\n  const [confirmPass, setConfirmPass] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const changeUserPass = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(`${URL}/changePass`, {\n        status: \"changePass\",\n        id: localStorage.getItem(\"userId\"),\n        oldPass,\n        newPass,\n        confirmPass\n      });\n      if (response.status === 200) {\n        navigate(\"/\");\n      }\n    } catch (error) {\n      if (error.response.status === 401) {\n        navigate(\"/login\");\n      } else if (error.response.status === 400) {\n        setError(error.response.data.error)\n      }\n    }\n  }\n\n  const getUserDetails = async () => {\n    try {\n      const response = await axios.post(`${URL}/getUser`, {\n        id: localStorage.getItem(\"userId\")\n      });\n      if (response.status === 200) {\n        setUser(response.data.user);\n        setName(response.data.user.name);\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  useEffect(() => {\n    getUserDetails();\n  }, [])\n\n  return (\n    user && !changePass ? <div className=\"flex justify-evenly h-full items-start flex-col gap-4\">\n      <p className=\"font-bold tracking-wider\">Name - <span className=\"font-normal\">{user.name}</span></p>\n      <p className=\"font-bold tracking-wider\">Username - <span className=\"font-normal\">{user.username}</span></p>\n      <p className=\"font-bold tracking-wider\">Age - <span className=\"font-normal\">{user.age}</span></p>\n      <p className=\"font-bold tracking-wider\">Blogs Posted - <span className=\"font-normal\">{user.totalBlogs}</span></p>\n      <div className=\"flex gap-4\">\n        <button onClick={() => setChangePass(true)} className=\"text-[blue] text-sm tracking-wider hover:underline\">Change Password</button>\n        <button className=\"text-[blue] text-sm tracking-wider hover:underline\">Delete my account</button>\n      </div>\n    </div> :\n      <div>\n        <button onClick={() => setChangePass(false)} className=\"text-sm tracking-wider flex gap-[2px] text-[blue] items-center\"><ArrowBackIcon style={{fontSize:14}} />Back</button>\n        <form onSubmit={changeUserPass} className=\"flex flex-col justify-evenly h-full items-center gap-4\">\n          <h2 className=\"font-bold tracking-wider\">Change Password</h2>\n          <input value={oldPass} onChange={(e) => setOldPass(e.target.value)} type=\"password\" placeholder=\"Old Password\" className=\"tracking-wider text-sm border-2 p-1 rounded-md focus:outline-none\" />\n          <input value={newPass} onChange={(e) => setNewPass(e.target.value)} type=\"password\" placeholder=\"New Password\" className=\"tracking-wider text-sm border-2 p-1 rounded-md focus:outline-none\" />\n          <input value={confirmPass} onChange={(e) => setConfirmPass(e.target.value)} type=\"password\" placeholder=\"Confirm Password\" className=\"tracking-wider text-sm border-2 p-1 rounded-md focus:outline-none\" />\n          <p className=\"text-sm text-[red] tracking-wider\">{error.length > 1 && \"*\"} {error}</p>\n          <button className=\"bg-[red] text-white px-2 py-1 rounded-sm tracking-wider text-sm\">Confirm changes</button>\n        </form>\n      </div>\n  )\n}\n\nexport default ProfileDetails"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}